function getConfigData(){var e=$.ajax({url:"/local/templates/mobile/js/config.json",async:!1});return $.parseJSON(e.responseText)}function initOpenMenu(){var e=$(".container-btn-menu"),o=$(".container-btn-close-menu"),n=$(".container-menu"),t=$(".company-header-logo"),i=$(".container-lang-feedback");$(e).click(function(){$(this).css("right","-100%"),$(o).css("right","0"),$(n).addClass("open-menu").css("top","0"),$(t).addClass("open-menu"),$(i).addClass("open-menu"),setTimeout(function(){$(".container-wrapper-menu").css("opacity","1")},1e3),$("body").addClass("overflow-hidden"),event.preventDefault()}),$(o).click(function(){$(this).css("right","-100%"),$(e).css("right","0"),$(n).removeClass("open-menu").css("top","-100%"),$(t).removeClass("open-menu"),$(i).removeClass("open-menu"),$(".container-wrapper-menu").css("opacity","0"),$("body").removeClass("overflow-hidden"),setTimeout(function(){},400)})}function initCloseMenu(){var e=$(".container-btn-menu"),o=$(".container-btn-close-menu"),n=$(".container-menu"),t=$(".company-header-logo"),i=$(".container-lang-feedback"),a=$(".wrapper-menu-header_link");$(a).click(function(){setTimeout(function(){$(o).css("right","-100%"),$(e).css("right","0"),$(n).removeClass("open-menu").css("top","-100%"),$(t).removeClass("open-menu"),$(i).removeClass("open-menu"),$("body").removeClass("overflow-hidden"),$(".container-wrapper-menu").css("opacity","0")},250)})}function initSliderWorking(){new Swiper(".swiper-slider-working",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",paginationType:"fraction",speed:800})}function focusInput(){var e=$(".input-box"),o=$(".input-label");$(e).on("focus",function(){$(this).parents().closest(".box-input").find(".form-label").find(o).addClass("label-focus")}),$(e).on("focusout",function(){null!=this&&0==this.value.length?$(this).parents().closest(".box-input").find(".form-label").find(o).removeClass("label-focus"):$(this).parents().closest(".box-input").find(".form-label").find(o).addClass("label-focus")})}function initDropzone(){Dropzone.options.myAwesomeDropzone={paramName:"file",maxFilesize:2,dictDefaultMessage:"Attach file",addRemoveLinks:!0,previewTemplate:document.getElementById("preview-template").innerHTML,accept:function(e,o){"justinbieber.jpg"==e.name?o("Naha, you don't."):o()},init:function(){this.on("addedfile",function(e){$(".dropzone").append('<input type="hidden" name="files[]" value="'+e.name+'">')}),this.on("removedfile",function(e){var o=$(".dropzone").find('input[value="'+e.name+'"]');o.remove()})}}}function scrollUp(){$(".btn-scroll-top").click(function(){$("body,html").animate({scrollTop:0},800)}),$(".link-footer").click(function(){$("body,html").animate({scrollTop:0},500)}),$(".wrapper-menu-header_link").click(function(){$("body,html").animate({scrollTop:0},0)})}function initFixBlock(){$(".sticky").Stickyfill()}function initFixSliderAbout(){var e=$(this).scrollTop(),o=$(".container-wrapper-contant").height()+$(".container-wrapper-what-did").height()+$(".container-wrapper-about").height()+$(".wrapper-stages-production_title").height()+140,n=$("#slide-img-1"),t=$("#slide-img-2"),i=$("#slide-img-3"),a=$("#slide-img-4"),r=$("#img-1"),s=$("#img-2"),l=$("#img-3"),p=$("#img-4"),c=o+1.55*n.height(),f=c+1.25*t.height(),d=f+1.75*i.height(),u=d+1.3*a.height();e>=o&&e<c?(n.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),r.css({opacity:"1",left:"0"})):(n.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),r.css({opacity:"0",left:"-50%"})),e>=c&&e<f?(t.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),s.css({opacity:"1",left:"0"})):(t.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),s.css({opacity:"0",left:"-50%"})),e>=f&&e<d?(i.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),l.css({opacity:"1",left:"0"})):(i.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),l.css({opacity:"0",left:"-50%"})),e>=d&&e<u?(a.find(".wrapper-stages-production_list_number").addClass("greenOpacity"),p.css({opacity:"1",left:"0"})):(a.find(".wrapper-stages-production_list_number").removeClass("greenOpacity"),p.css({opacity:"0",left:"-50%"})),Revealator.effects_padding="-220"}function initOpacityBest(){var e=$(this).scrollTop(),o=$(".container-wrapper-contant").height()+$(".container-wrapper-what-did").height()+$(".container-wrapper-about").height()+$(".container-wrapper-stages-production").height()-100;e>=o?$(".container-wrapper-best").css("opacity","1"):$(".container-wrapper-best").css("opacity","0")}function initSwiperGallery(){new Swiper(".swiper-slider-about-gallery",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",paginationType:"fraction",speed:800})}function initSwiperNews(){new Swiper(".swiper-slider-news",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",speed:800})}function initPopupNews(){$("body").find("[data-link-news]").unbind("click"),$(".popup-news").click(function(){var e=$(this).data("link-news"),o="";$("div").is("[data-news='"+e+"']")?setTimeout(function(){var o=$("body").find("[data-news='"+e+"']");$(this).addClass("open-popup"),$(".container-overflow").addClass("overflow-open"),$(".container-overflow-back-page").addClass("overflow-open"),o.css("right","0"),$("body").addClass("overflow-hidden")},10):("barba"===$(this).data("typequery")&&(o={"X-Barba":"yes"}),$.ajax({url:$(this).data("url"),type:"GET",dataType:"html",headers:o,success:function(o,n,t){$(".container-overflow").remove(),$(".container-overflow-back-page").remove(),$("[data-namespace = news-page] .container-wrapper").after(o),initPopupNews(),initSwiperNews();var i=$("body").find("[data-news='"+e+"']");$(this).addClass("open-popup"),$(".container-overflow").addClass("overflow-open"),$(".container-overflow-back-page").addClass("overflow-open"),i.css("right","0"),$("body").addClass("overflow-hidden")}}))}),$(".container-overflow").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$(".container-btn-news").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".container-overflow-back-page").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$(".container-btn-news").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-popup").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$(".container-btn-news").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-page").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-news").css("right","-100%"),$(".container-btn-news").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".popup-news").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-news").css("right","-115%"),$(".container-btn-news").css("right","-115%"),$("body").removeClass("overflow-hidden")})}function initMakeOrder(){$(".make-order-popup").click(function(){function e(){$("html:not(:animated),body:not(:animated)").animate({scrollTop:n},800),$(".input-name").focus()}isEnabledScroll=!1,$(".ajax-pager-link").off("click"),$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden"),$(".container-overflow-back-page").remove();var o=$(this).attr("href"),n=$(o).offset().top;return setTimeout(e,450),setTimeout(function(){isEnabledScroll=!0,initInfinityScroll()},1500),!1})}function initApplicationForm(){$(".btn-appl-form").click(function(){function e(){$("html:not(:animated),body:not(:animated)").animate({scrollTop:n},800),$(".input-name").focus(),setTimeout(function(){isEnabledScroll=!0,initInfinityScroll()},1500)}isEnabledScroll=!1,$(".container-btn-close-menu").css("right","-100%"),$(".container-btn-menu").css("right","0"),$(".open-menu").removeClass("open-menu").css("top","-100%"),$(".company-header-logo").removeClass("open-menu"),$(".container-lang-feedback").removeClass("open-menu"),$(".container-wrapper-menu").css("opacity","0"),$("body").removeClass("overflow-hidden");var o=$(this).attr("href"),n=$(o).offset().top;return setTimeout(e,1e3),!1})}function initPopupPortfolio(){$("body").find("[data-link-portfolio]").unbind("click"),$(".popup-portfolio").click(function(){var e=$(this).data("link-portfolio"),o="";$("div").is("[data-portfolio='"+e+"']")?setTimeout(function(){var o=$("body").find("[data-portfolio='"+e+"']");$(this).addClass("open-popup"),$(".container-overflow").addClass("overflow-open"),$(".container-overflow-back-page").addClass("overflow-open"),o.css("right","0"),$('[data-portfolio="'+e+'"] .container-btn-portfolio').css("right","0"),$("body").addClass("overflow-hidden")},10):("barba"===$(this).data("typequery")&&(o={"X-Barba":"yes"}),$.ajax({url:$(this).data("url"),type:"GET",dataType:"html",headers:o,success:function(o,n,t){$(".container-overflow").remove(),$(".container-overflow-back-page").remove(),$("[data-namespace = portfolio-page] .container-wrapper").after(o),initPopupPortfolio(),initMakeOrder(),setTimeout(function(){var o=$("body").find("[data-portfolio='"+e+"']");$(this).addClass("open-popup"),$(".container-overflow").addClass("overflow-open"),$(".container-overflow-back-page").addClass("overflow-open"),o.css("right","0"),$('[data-portfolio="'+e+'"] .container-btn-portfolio').css("right","0"),$("body").addClass("overflow-hidden")},10)}}))}),$(".container-overflow").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-popup").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".container-overflow-back-page").click(function(){$(this).removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-100%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".brn-close-page").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-100%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")}),$(".popup-portfolio").click(function(){$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden")})}function initValidForm(){var e=$(".js-form");e.length&&e.each(function(){var e=$(this);$.validate({form:e,borderColorOnError:!0,scrollToTopOnError:!1,modules:"html5"})})}function newsDetailAjax(e,o){$.ajax({url:e,type:"GET",dataType:"html",headers:o,success:function(e,o,n){$(".container-overflow").remove(),$(".container-overflow-back-page").remove(),$("[data-namespace = news-page] .container-wrapper").after(e),initPopupNews(),initSwiperNews()}})}function portfolioDetailAjax(e,o){$.ajax({url:e,type:"GET",dataType:"html",headers:o,success:function(e,o,n){$(".container-overflow").remove(),$(".container-overflow-back-page").remove(),$("[data-namespace = portfolio-page] .container-wrapper").after(e),initPopupPortfolio(),initMakeOrder()}})}function initInfinityScroll(){!function(){var e="ajax-pager-loading",o="ajax-pager-wrap",n="ajax-pager-link",t="wrapper-class",i=['<span class="'+e+'">',"Загрузка…","</span>"].join(""),a=!1,r=function(e){var t=$("."+e),i=$(window);t.length&&$("."+o).length&&isEnabledScroll&&i.on("scroll",function(){i.scrollTop()+i.height()>t.offset().top+t.height()&&!a&&(a=!0,$("."+n).click())})},s=function(e){e.preventDefault(),a=!0;var s=$("."+n).data(t),l=$("."+s),p=$(this);l.length&&isEnabledScroll&&($("."+o).append(i),$.get(p.attr("href"),{AJAX_PAGE:"Y"},function(e){$("."+o).remove(),l.append(e),initPopupNews(),initPopupPortfolio(),r(s),a=!1}))};$(function(){$("."+n).length&&$("."+n).data(t).length&&(r($("."+n).data(t)),$(document).off().on("click","."+n,s))})}()}var isEnabledScroll=!0,config=getConfigData(),BarbaWidget={init:function(){var e=this;Barba.Pjax.start(),Barba.Pjax.getTransition=function(){return e.MovePage}},MovePage:Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(setTimeout(this.movePages.bind(this),1400))},initFixBlock:function(){$(".sticky").Stickyfill()},initHoverSwiper:function(){$(".hoverBtn").mouseover(function(){$(".swiper-slider-about-gallery .swiper-slide-img > img").css("transform","scale(1.1)")}),$(".hoverBtn").mouseout(function(){$(".swiper-slider-about-gallery .swiper-slide-img > img").css("transform","scale(1)")}),$(".hoverBtn").mouseover(function(){$(".swiper-slider-news .swiper-slide > img").css("transform","scale(1.1)")}),$(".hoverBtn").mouseout(function(){$(".swiper-slider-news .swiper-slide > img").css("transform","scale(1)")})},initMouseMove:function(){var e=20,o=e/$(window).height(),n=e/$(window).width();$(".container-wrapper").mousemove(function(e){var t=e.pageX-$(window).width()/2,i=e.pageY-$(window).height()/2,a=n*t*-1-5,r=o*i*-1-5;$(".mouseov").css("background-position",a+"px     "+r+"px")})},scrollForm:function(){$("a.anchor-touch").click(function(){var e=$(this).attr("href"),o=$(e).offset().top;return jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:o},800),$(".input-name").focus(),!1})},focusInput:function(){var e=$(".input-box"),o=$(".input-label");$(e).on("focus",function(){$(this).parents().closest(".box-input").find(".form-label").find(o).addClass("label-focus")}),$(e).on("focusout",function(){null!=this&&0==this.value.length?$(this).parents().closest(".box-input").find(".form-label").find(o).removeClass("label-focus"):$(this).parents().closest(".box-input").find(".form-label").find(o).addClass("label-focus")})},initSliderWorking:function(){new Swiper(".swiper-slider-working",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",paginationType:"fraction",speed:800})},fadeOut:function(){var e=$(".container-btn-menu"),o=$(".container-btn-close-menu"),n=$(".container-menu"),t=$(".company-header-logo"),i=$(".container-lang-feedback"),a=$(".wrapper-menu-header_link");return $(a).click(function(){setTimeout(function(){$(o).css("right","-100%"),$(e).css("right","0"),$(n).removeClass("open-menu").css("top","-100%"),$(t).removeClass("open-menu"),$(i).removeClass("open-menu"),$(".container-wrapper-menu").css("opacity","0")},250)}),$(this.oldContainer).animate({opacity:0}).promise()},movePages:function(){var e=this;this.initFixBlock(),this.initHoverSwiper(),this.initMouseMove(),this.scrollForm(),this.focusInput(),this.initSliderWorking(),TweenLite.set(this.newContainer,{visibility:"visible",xPercent:100,position:"absolute",left:0,top:0,right:0}),TweenLite.to(this.oldContainer,.6,{xPercent:-100}),TweenLite.to(this.newContainer,.6,{xPercent:0,onComplete:function(){TweenLite.set(e.newContainer,{clearProps:"all"}),e.done()}})}})},MapPage=Barba.BaseView.extend({namespace:"map-page",onEnterCompleted:function(){function e(){var e={lat:config.about.map.lat,lng:config.about.map.lng},o=new google.maps.Map(document.getElementById("map"),{center:e,zoom:15,disableDefaultUI:!1,scrollwheel:!1,mapTypeControl:!1,styles:[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}]}),n={url:config.about.map.markerImage,size:new google.maps.Size(80,80),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)};marker=new google.maps.Marker({position:e,map:o,icon:n})}setTimeout(e,500)}}),NewsPage=Barba.BaseView.extend({namespace:"news-page",onEnterCompleted:function(){function e(){new Swiper(".swiper-slider-news",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",speed:800})}initPopupNews(),e()}}),AboutPage=Barba.BaseView.extend({namespace:"about-page",onEnterCompleted:function(){function e(){new Swiper(".swiper-slider-about-gallery",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",paginationType:"fraction",speed:800})}function o(){new Swiper(".swiper-slider-working",{paginationClickable:!0,loop:!0,nextButton:".swiper-button-next",prevButton:".swiper-button-prev",pagination:".swiper-pagination",paginationType:"fraction",speed:800})}e(),o()}}),PortfolioPage=Barba.BaseView.extend({namespace:"portfolio-page",onEnterCompleted:function(){function e(){$(".make-order-popup").click(function(){function e(){$("html:not(:animated),body:not(:animated)").animate({scrollTop:n},800),$(".input-name").focus()}$(".container-overflow").removeClass("overflow-open"),$(".container-popup-portfolio").css("right","-115%"),$(".container-btn-portfolio").css("right","-115%"),$("body").removeClass("overflow-hidden");var o=$(this).attr("href"),n=$(o).offset().top;return setTimeout(e,450),!1})}initPopupPortfolio(),e()}});Barba.Dispatcher.on("newPageReady",function(e,o,n,t){var i=(window.location.href,window.location.pathname),a=$(".container-popup-news").data("path"),r=$(".container-popup-portfolio").data("path");i.indexOf(config.root.de)!==-1?($("#de").addClass("active disabled"),$("#en").removeClass("active disabled")):($("#de").removeClass("active disabled"),"/"!==i&&$("#de").attr("href",config.root.de+i),$("#en").addClass("active disabled")),i.indexOf(config.portfolio.pageUrl)===-1?($("a[href^='/'].nav_link").removeClass("active"),$("a[href='"+i+"'].nav_link").addClass("active")):i===config.portfolio.pageUrl?($("a[href^='/'].nav_link").removeClass("active"),$("a[href='"+i+"'].nav_link").addClass("active")):($("a[href^='/'].link-menu_list").removeClass("active"),$("a[href='"+i+"'].link-menu_list").addClass("active")),i.indexOf(config.news.pageUrl)!==-1&&i.length>6&&($(".btn-scroll-top").click(),$('[data-url="'+i+'"].popup-news').click()),i.indexOf(config.portfolio.pageUrl)!==-1&&i.length>11&&($(".btn-scroll-top").click(),initPopupPortfolio()),a===i&&setTimeout(function(){$(".container-overflow").addClass("overflow-open"),$(".container-overflow-back-page").addClass("overflow-open"),$('[data-path="'+a+'"].container-popup-news').css("right","0"),$("body").addClass("overflow-hidden")},500),r===i&&setTimeout(function(){$(".container-overflow").addClass("overflow-open"),$(".container-overflow-back-page").addClass("overflow-open"),$('[data-path="'+r+'"].container-popup-portfolio').css("right","0"),$('[data-path="'+r+'"] .container-btn-portfolio').css("right","0"),$("body").addClass("overflow-hidden")},500),initInfinityScroll(),i!==config.root.en&&i!==config.root.de||!o.url||$("body,html").animate({scrollTop:0},800)}),$(window).scroll(function(e){initFixBlock(),initFixSliderAbout(),initOpacityBest()}),focusInput(),initOpenMenu(),initSliderWorking(),initDropzone(),scrollUp(),initFixBlock(),initFixSliderAbout(),initOpacityBest(),initSwiperGallery(),initSwiperNews(),initPopupNews(),initMakeOrder(),initPopupPortfolio(),initValidForm(),initApplicationForm(),initCloseMenu(),MapPage.init(),NewsPage.init(),AboutPage.init(),PortfolioPage.init(),BarbaWidget.init();